---
title: "Perinatal codes - Data cleaning"
author: "Dominick Lemas"
date: "12/02/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
##-------------- 
# **************************************************************************** #
# ***************                Project Overview              *************** #
# **************************************************************************** #
# Author:      Dominick Lemas
# Date:        October 21, 2021
# IRB:         IRB protocol IRB201601899  
#
# version: R version 4.0.3 (2020-10-10)
# version: Rstudio version Version 1.3.1073  
# **************************************************************************** #
# ***************                Description                   *************** #
# **************************************************************************** #
# PLAN: Access redcap via API and pull/format/clean data for downstream analysis.
# Note: vpn must be active

# Citation for ICD9 PE codes: https://www.ncbi.nlm.nih.gov/books/NBK442039/table/sb222.t7/

```



Output 6 - Uncomplicated Hypertension 
```{r, message=FALSE}

outcomes_hypertension=c("O13.3", "642.31", "642.33", "O13.9", "O16.3", "O16.9", "O16.1", "O16.2", "O13.2", "O13.1")

# create logic: 1= match %in% outcomes, 0= no match  
df_codes = df_codes %>%
  mutate(multiple_logic=if_else(perinatal_dx_code %in% outcomes_hypertension, 1, 0)) 

names(df_codes)[names(df_codes) == "multiple_logic"] <- "hypertension"
```


Output 7 - Complicated Diabetes
```{r, message=FALSE}

outcomes_complicated_diabetes=c("648", "648.03", "648.01", "648.02", "648.04")

# create logic: 1= match %in% outcomes, 0= no match  
df_codes = df_codes %>%
  mutate(multiple_logic=if_else(perinatal_dx_code %in% outcomes_complicated_diabetes, 1, 0)) 

names(df_codes)[names(df_codes) == "multiple_logic"] <- "complicated_diabetes"
```

Output 8 - Uncomplicated Diabetes
```{r, message=FALSE}

outcomes_complicated_diabetes=c("O24.912", "O24.419", "O24.410", "O24.415", "O24.425", "O24.429", "O24.12", "O24.33", "O24.113", "O24.13", "O24.02", "O24.013", "O24.019", "O24.012", "O24.011", "O24.111", "O24.112", "O24.312", "O24.913", "O24.420", "O24.414", "O24.424", "O24.439", "O24.313", "O24.82", "O24.430", "O24.919", "O24.911", "O24.311", "O24.811", "O24.92", "O24.435", "O24.03", "O24.119", "O24.319", "O24.813", "O24.93", "O24.819", "O24.32")

# create logic: 1= match %in% outcomes, 0= no match  
df_codes = df_codes %>%
  mutate(multiple_logic=if_else(perinatal_dx_code %in% outcomes_complicated_diabetes, 1, 0)) 

names(df_codes)[names(df_codes) == "multiple_logic"] <- "complicated_diabetes"
```
